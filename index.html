<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SumSum Bank Desktop - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background-color: #fff0f6; min-height: 100vh; margin: 0; }
        .bg-main-pink { background-color: #ff1493; }
        .text-main-pink { color: #ff1493; }
        .step-page { display: none; }
        .step-page.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: white; border-radius: 2rem; padding: 2.5rem; box-shadow: 0 15px 30px rgba(0,0,0,0.05); width: 100%; max-width: 800px; margin: 2rem auto; }
        input, select { border: 1.5px solid #ffcae5 !important; border-radius: 1rem !important; padding: 1rem !important; width: 100%; outline: none; transition: 0.3s; color: #ff1493; background: white; }
        input:focus, select:focus { border-color: #ff1493 !important; }
        .btn-next { background-color: #ff1493; color: white; width: 100%; max-width: 300px; padding: 1rem; border-radius: 1.5rem; font-weight: bold; font-size: 1.25rem; display: block; margin: 2rem auto; transition: 0.3s; text-align: center; border: none; cursor: pointer; }
        .btn-next:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3); }
        .btn-next:disabled { background-color: #ffcae5; cursor: not-allowed; opacity: 0.7; }
        .option-item { border: 1.5px solid #ffcae5; border-radius: 1.5rem; padding: 1.5rem; cursor: pointer; transition: 0.2s; background: white; }
        .option-item.selected { border: 3px solid #ff1493; background-color: #fff0f6; }
        .step-dot { width: 35px; height: 35px; border-radius: 50%; background: #ffcae5; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; z-index: 10; }
        .step-dot.active { background: #ff1493; }
    </style>
</head>
<body class="flex flex-col">

    <header class="bg-main-pink p-5 text-white shadow-md">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="text-3xl font-bold leading-tight">SumSum<br><span class="text-pink-200">Bank</span></div>
                <div class="h-10 w-[1px] bg-white/40 hidden md:block"></div>
                <div class="text-xl opacity-90 hidden md:block">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</div>
            </div>
        </div>
    </header>

    <main class="p-6">
        <div class="max-w-3xl mx-auto mb-8 flex justify-between items-center relative px-4">
            <div class="absolute h-[2px] bg-pink-100 w-[90%] top-[17px] left-[5%] z-0"></div>
            <div class="step-dot active" id="dot1">1</div>
            <div class="step-dot" id="dot2">2</div>
            <div class="step-dot" id="dot3">3</div>
            <div class="step-dot" id="dot4">4</div>
            <div class="step-dot" id="dot5">5</div>
            <div class="step-dot" id="dot6">6</div>
        </div>

        <section id="step1" class="step-page active">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-10">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</h2>
                <div class="max-w-xs mx-auto">
                    <label class="text-main-pink font-bold mb-2 block text-sm">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                    <input type="tel" id="phoneInput" placeholder="0XXXXXXXXX" maxlength="10" oninput="validateStep1()" class="text-center text-xl tracking-widest">
                </div>
            </div>
            <button id="btnStep1" class="btn-next" onclick="nextPage(2)" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
        </section>

        <section id="step2" class="step-page">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-10">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="option-item flex items-center gap-4" onclick="selectType(this, '‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ')">
                        <span class="text-4xl">üì±</span> <b>‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</b>
                    </div>
                    <div class="option-item flex items-center gap-4" onclick="selectType(this, '‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤')">
                        <span class="text-4xl">üìÖ</span> <b>‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤</b>
                    </div>
                </div>
            </div>
            <button id="btnStep2" class="btn-next" onclick="nextPage(3)" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
        </section>

        <section id="step3" class="step-page">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-10">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="text-main-pink font-bold block mb-2">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label>
                        <select id="provinceSelect" onchange="handleProvinceChange()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-main-pink font-bold block mb-2">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ / ‡πÄ‡∏Ç‡∏ï</label>
                        <select id="districtSelect" onchange="validateStep3()" disabled>
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ --</option>
                        </select>
                    </div>
                </div>
                <div id="branchDisplay" class="mt-8 p-4 bg-pink-50 rounded-xl hidden text-center border border-pink-100">
                    <p class="text-main-pink font-bold" id="branchName">‡∏™‡∏≤‡∏Ç‡∏≤...</p>
                </div>
            </div>
            <button id="btnStep3" class="btn-next" onclick="nextPage(4)" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
        </section>

        <section id="step4" class="step-page">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-10">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="option-item" onclick="selectService(this, '‡∏ù‡∏≤‡∏Å / ‡∏ñ‡∏≠‡∏ô')">üíµ ‡∏ù‡∏≤‡∏Å / ‡∏ñ‡∏≠‡∏ô</div>
                    <div class="option-item" onclick="selectService(this, '‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ / ‡∏ö‡∏±‡∏ï‡∏£ATM')">üí≥ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ / ‡∏ö‡∏±‡∏ï‡∏£ATM</div>
                    <div class="option-item" onclick="selectService(this, '‡∏Ç‡∏≠‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠')">üí∞ ‡∏Ç‡∏≠‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠</div>
                    <div class="option-item" onclick="selectService(this, '‡∏ã‡∏∑‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô / ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô')">üìà ‡∏ã‡∏∑‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô / ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô</div>
                </div>
            </div>
            <button id="btnStep4" class="btn-next" onclick="nextPage(5)" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
        </section>

        <section id="step5" class="step-page">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-8">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <p class="text-main-pink font-bold mb-4" id="dateLabel">1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</p>
                        <div id="dateGrid" class="grid grid-cols-3 gap-2"></div>
                    </div>
                    <div>
                        <p class="text-main-pink font-bold mb-4">2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤ (‡∏´‡πà‡∏≤‡∏á 30 ‡∏ô‡∏≤‡∏ó‡∏µ)</p>
                        <div id="timeGrid" class="grid grid-cols-2 gap-2"></div>
                    </div>
                </div>
            </div>
            <button id="btnStep5" class="btn-next" onclick="nextPage(6)" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
        </section>

        <section id="step6" class="step-page">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-8">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</h2>
                <div id="summaryContent" class="space-y-4 border-t pt-6"></div>
            </div>
            <button class="btn-next" onclick="nextPage(7)">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        </section>

        <section id="step7" class="step-page text-center">
            <div id="ticket" class="card inline-block text-left border-2 border-dashed border-pink-300">
                <div class="flex flex-col md:flex-row gap-10 items-center">
                    <div id="ticketDetails" class="space-y-3"></div>
                    <div id="qrcode" class="p-2 bg-white border"></div>
                </div>
            </div>
            <button class="btn-next" onclick="downloadTicket()">üíæ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß</button>
        </section>
    </main>

    <script>
        let userData = { phone:'', type:'', province:'', district:'', service:'', date:'', time:'' };

        const thaiData = {
            "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£": ["‡πÄ‡∏Ç‡∏ï‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£", "‡πÄ‡∏Ç‡∏ï‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô", "‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å", "‡πÄ‡∏Ç‡∏ï‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£", "‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏ô‡∏≤"],
            "‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô": ["‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", "‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ú‡πà", "‡∏û‡∏•", "‡∏ä‡∏∏‡∏°‡πÅ‡∏û"],
            "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà": ["‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", "‡πÅ‡∏°‡πà‡∏£‡∏¥‡∏°", "‡∏´‡∏≤‡∏á‡∏î‡∏á", "‡∏™‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏¢"],
            "‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ": ["‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ", "‡∏ö‡∏≤‡∏á‡∏•‡∏∞‡∏°‡∏∏‡∏á", "‡∏®‡∏£‡∏µ‡∏£‡∏≤‡∏ä‡∏≤", "‡∏™‡∏±‡∏ï‡∏´‡∏µ‡∏ö"]
        };

        function nextPage(step) {
            document.querySelectorAll('.step-page').forEach(p => p.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            for(let i=1; i<=6; i++) {
                const dot = document.getElementById('dot'+i);
                if(dot) dot.classList.toggle('active', i <= step);
            }
            if(step === 3) initProvinces();
            if(step === 5) initDateTime();
            if(step === 6) renderSummary();
            if(step === 7) renderTicket();
            window.scrollTo(0,0);
        }

        function validateStep1() {
            const input = document.getElementById('phoneInput');
            input.value = input.value.replace(/\D/g, '');
            userData.phone = input.value;
            document.getElementById('btnStep1').disabled = (input.value.length !== 10);
        }

        // ‡∏´‡∏ô‡πâ‡∏≤ 2: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö "‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ")
        function selectType(el, type) {
            document.querySelectorAll('#step2 .option-item').forEach(i => i.classList.remove('selected'));
            el.classList.add('selected');
            userData.type = type;
            
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÉ‡∏´‡πâ Reset ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏Ñ‡πâ‡∏≤‡∏á
            userData.date = ''; 
            document.getElementById('btnStep2').disabled = false;
        }

        function initProvinces() {
            const pSel = document.getElementById('provinceSelect');
            if(pSel.options.length > 1) return;
            Object.keys(thaiData).sort().forEach(p => {
                const opt = document.createElement('option');
                opt.value = p; opt.text = p;
                pSel.appendChild(opt);
            });
        }

        function handleProvinceChange() {
            const province = document.getElementById('provinceSelect').value;
            const dSel = document.getElementById('districtSelect');
            dSel.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ --</option>';
            document.getElementById('branchDisplay').classList.add('hidden');
            if(province) {
                dSel.disabled = false;
                thaiData[province].sort().forEach(d => {
                    const opt = document.createElement('option');
                    opt.value = d; opt.text = d;
                    dSel.appendChild(opt);
                });
            } else {
                dSel.disabled = true;
            }
            validateStep3();
        }

        function validateStep3() {
            const province = document.getElementById('provinceSelect').value;
            const district = document.getElementById('districtSelect').value;
            const btn = document.getElementById('btnStep3');
            userData.province = province;
            userData.district = district;
            if(province && district) {
                btn.disabled = false;
                document.getElementById('branchDisplay').classList.remove('hidden');
                document.getElementById('branchName').innerText = "SumSum Bank ‡∏™‡∏≤‡∏Ç‡∏≤ " + district;
            } else {
                btn.disabled = true;
            }
        }

        function selectService(el, s) {
            document.querySelectorAll('#step4 .option-item').forEach(i => i.classList.remove('selected'));
            el.classList.add('selected');
            userData.service = s;
            document.getElementById('btnStep4').disabled = false;
        }

        // ‡∏´‡∏ô‡πâ‡∏≤ 5: ‡∏õ‡∏£‡∏±‡∏ö Logic ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"
        function initDateTime() {
            const dGrid = document.getElementById('dateGrid');
            const dLabel = document.getElementById('dateLabel');
            dGrid.innerHTML = '';
            
            let date = new Date();

            if(userData.type === '‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ') {
                // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÉ‡∏´‡πâ‡∏ü‡∏¥‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢
                dLabel.innerText = "1. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)";
                let fullToday = date.toLocaleDateString('th-TH', {weekday:'long', day:'numeric', month:'long'});
                let dNum = date.getDate();
                let mStr = date.toLocaleDateString('th-TH', {month:'short'});
                
                let div = document.createElement('div');
                div.className = "border rounded-xl p-3 text-center cursor-default bg-main-pink text-white shadow-md";
                div.innerHTML = `<p class='text-xs opacity-80'>${mStr}</p><p class='text-xl font-bold'>${dNum}</p>`;
                dGrid.appendChild(div);
                
                userData.date = fullToday; // ‡∏•‡πá‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
            } else {
                // ‡∏ñ‡πâ‡∏≤‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 6 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£
                dLabel.innerText = "1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤";
                let count = 0;
                let tempDate = new Date();
                while(count < 6) {
                    let day = tempDate.getDay();
                    if(day !== 0 && day !== 6) { 
                        let dNum = tempDate.getDate();
                        let mStr = tempDate.toLocaleDateString('th-TH', {month:'short'});
                        let full = tempDate.toLocaleDateString('th-TH', {weekday:'long', day:'numeric', month:'long'});
                        let div = document.createElement('div');
                        div.className = "border rounded-xl p-3 text-center cursor-pointer hover:bg-pink-50";
                        div.innerHTML = `<p class='text-xs text-gray-400'>${mStr}</p><p class='text-xl font-bold text-main-pink'>${dNum}</p>`;
                        div.onclick = function() {
                            document.querySelectorAll('#dateGrid div').forEach(v => v.classList.remove('bg-main-pink', 'text-white'));
                            this.classList.add('bg-main-pink', 'text-white');
                            userData.date = full;
                            checkStep5();
                        };
                        dGrid.appendChild(div);
                        count++;
                    }
                    tempDate.setDate(tempDate.getDate() + 1);
                }
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
            const tGrid = document.getElementById('timeGrid');
            tGrid.innerHTML = '';
            const times = ["08:30", "09:00", "09:30", "10:00", "10:30", "11:00", "13:00", "13:30", "14:00", "14:30", "15:00"];
            times.forEach(t => {
                let div = document.createElement('div');
                div.className = "border rounded-lg p-2 text-center cursor-pointer hover:bg-pink-50 text-sm";
                div.innerText = t + " ‡∏ô.";
                div.onclick = function() {
                    document.querySelectorAll('#timeGrid div').forEach(v => v.classList.remove('bg-main-pink', 'text-white'));
                    this.classList.add('bg-main-pink', 'text-white');
                    userData.time = t + " ‡∏ô.";
                    checkStep5();
                };
                tGrid.appendChild(div);
            });
            checkStep5();
        }

        function checkStep5() {
            document.getElementById('btnStep5').disabled = !(userData.date && userData.time);
        }

        function renderSummary() {
            document.getElementById('summaryContent').innerHTML = `
                <div class="flex justify-between"><span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</span><b class="text-main-pink">${userData.type}</b></div>
                <div class="flex justify-between"><span>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</span><b>${userData.phone}</b></div>
                <div class="flex justify-between"><span>‡∏™‡∏≤‡∏Ç‡∏≤:</span><b>${userData.district} (${userData.province})</b></div>
                <div class="flex justify-between"><span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:</span><b>${userData.service}</b></div>
                <div class="flex justify-between"><span>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</span><b class="text-main-pink">${userData.date}</b></div>
                <div class="flex justify-between"><span>‡πÄ‡∏ß‡∏•‡∏≤:</span><b class="text-main-pink">${userData.time}</b></div>
            `;
        }

        function renderTicket() {
            document.getElementById('ticketDetails').innerHTML = `
                <h3 class="text-main-pink font-bold text-xl mb-4">${userData.type}‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
                <p class="text-sm"><b>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:</b> ${userData.service}</p>
                <p class="text-sm"><b>‡∏™‡∏≤‡∏Ç‡∏≤:</b> ${userData.district}</p>
                <div class="bg-pink-50 p-3 rounded-lg border border-pink-100 my-2">
                    <p class="text-main-pink font-bold">${userData.date}</p>
                    <p class="text-main-pink font-bold text-lg">${userData.time}</p>
                </div>
                <p class="text-[10px] text-gray-400">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${userData.phone}</p>
            `;
            document.getElementById('qrcode').innerHTML = '';
            new QRCode(document.getElementById("qrcode"), { text: "SUMSUM-"+Date.now(), width: 120, height: 120, colorDark: "#ff1493" });
        }

        function downloadTicket() {
            html2canvas(document.getElementById('ticket')).then(canvas => {
                const link = document.createElement('a');
                link.download = 'SumSum-Queue.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
</body>
</html>